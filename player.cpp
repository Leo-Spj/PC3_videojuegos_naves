#include "player.h"
#include "miniwin.h"
#include <windows.h>

using namespace miniwin;
using namespace std;

const int escalado = 2;
const bool pintarBorde = false;

player::player(int x, int y) : offsetX(x), offsetY(y) {
    colorMap = {
        {"c_1", {163, 46, 70}},
        {"c_2", {235, 74, 83}},
        {"c_3", {231, 99, 115}},
        {"c_4", {254, 250, 201}},
        {"c_5", {244, 187, 73}},
        {"c_6", {255, 255, 255}},
        {"c_7", {203, 202, 202}},
        {"c_8", {69, 69, 69}},
        {"c_9", {190, 249, 254}},
        {"c_10", {167, 206, 213}}
    };
}

void player::setColor(const string& color) {
    if (colorMap.find(color) != colorMap.end()) {
        vector<int> rgb = colorMap[color];
        color_rgb(rgb[0], rgb[1], rgb[2]);
    }
}

void player::mover() {
    const int VELOCIDAD = 20;

    if (GetAsyncKeyState(VK_LEFT) & 0x8000) {
        if (offsetX > 0) {
            offsetX -= VELOCIDAD;
        }
    }
    if (GetAsyncKeyState(VK_RIGHT) & 0x8000) {
        if (offsetX < 800 - ANCHO_NAVE) {
            offsetX += VELOCIDAD;
        }
    }
    if (GetAsyncKeyState(VK_UP) & 0x8000) {
        if (offsetY > 0) {
            offsetY -= VELOCIDAD;
        }
    }
    if (GetAsyncKeyState(VK_DOWN) & 0x8000) {
        if (offsetY < 600 - ALTO_NAVE) {
            offsetY += VELOCIDAD;
        }
    }
}

void player::dibujaCuadrado(int a, int b, const string& colorRelleno) {
    const int x = a * escalado + offsetX;
    const int y = b * escalado + offsetY;

    setColor(colorRelleno);

    rectangulo_lleno(x, y, x + escalado, y + escalado);

    if (pintarBorde) {
        color_rgb(100, 100, 100);
        linea(x, y, x, y + escalado);
        linea(x, y + escalado, x + escalado, y + escalado);
        linea(x + escalado, y + escalado, x + escalado, y);
        linea(x + escalado, y, x, y);
    }
}

void player::dibujaFila(int fila, const vector<string>& colores) {
    for (size_t i = 0; i < colores.size(); ++i) {
        if (!colores[i].empty()) {
            dibujaCuadrado(i, fila, colores[i]);
        }
    }
}

void player::setPosicion(int x, int y) {
    offsetX = x;
    offsetY = y;
}

void player::dibujar() {
    dibujaFila(0, {"", "", "", "", "", "", "", "", "", "", "", "", "", "c_8", "c_8", "c_8", "", "", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(1, {"", "", "", "", "", "", "", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(2, {"", "", "", "", "", "", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(3, {"", "", "", "", "", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(4, {"", "", "", "", "", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(5, {"", "", "", "", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(6, {"", "", "", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", "", "", ""});
    dibujaFila(7, {"", "", "", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", "", "", ""});
    dibujaFila(8, {"", "", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", "", ""});
    dibujaFila(9, {"", "", "", "", "", "", "", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "", "", "", "", "", "", "", ""});
    dibujaFila(10, {"", "", "", "", "", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(11, {"", "", "", "", "", "", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(12, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(13, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "c_8", "c_8", "c_8", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(14, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(15, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_8", "c_8", "c_8", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(16, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_8", "c_2", "c_2", "c_8", "c_9", "c_9", "c_9", "c_8", "c_2", "c_2", "c_8", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(17, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_8", "c_2", "c_8", "c_9", "c_9", "c_9", "c_9", "c_9", "c_8", "c_2", "c_8", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(18, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_8", "c_2", "c_8", "c_9", "c_9", "c_9", "c_9", "c_9", "c_8", "c_2", "c_8", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(19, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_8", "c_2", "c_8", "c_9", "c_9", "c_9", "c_9", "c_9", "c_8", "c_2", "c_8", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(20, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_8", "c_2", "c_2", "c_8", "c_9", "c_9", "c_9", "c_8", "c_2", "c_2", "c_8", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(21, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_8", "c_8", "c_8", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(22, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(23, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "c_8", "c_8", "c_8", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(24, {"", "", "", "", "", "", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(25, {"", "", "", "", "", "", "c_8", "c_8", "c_8", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_7", "c_8", "c_8", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(26, {"", "", "", "", "", "", "c_8", "c_2", "c_2", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_2", "c_2", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(27, {"", "", "", "", "", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", "", "", "", "", "", ""});
    dibujaFila(28, {"", "", "", "", "", "c_8", "c_2", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "c_8", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "c_2", "c_8", "", "", "", "", "", ""});
    dibujaFila(29, {"", "", "", "", "c_8", "c_2", "c_2", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_2", "c_2", "c_2", "c_8", "c_8", "c_8", "c_8", "c_8", "c_8", "c_2", "c_2", "c_8", "", "", "", "", ""});
    dibujaFila(30, {"", "", "", "c_8", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_8", "", "", "", ""});
    dibujaFila(31, {"", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_2", "c_8", "", "", ""});
    dibujaFila(32, {"", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", ""});
    dibujaFila(33, {"c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", ""});
    dibujaFila(34, {"c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_8", "c_7", "c_7", "c_7", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", ""});
    dibujaFila(35, {"c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "c_8", "c_8", "c_8", "c_2", "c_2", "c_2", "c_8", "c_8", "c_8", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", ""});
    dibujaFila(36, {"c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", "c_8", "c_5", "c_8", "c_2", "c_2", "c_2", "c_8", "c_5", "c_8", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", ""});
    dibujaFila(37, {"c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", "", "c_8", "c_5", "c_8", "c_2", "c_2", "c_2", "c_8", "c_5", "c_8", "", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", ""});
    dibujaFila(38, {"c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", "", "c_8", "c_5", "c_8", "c_2", "c_2", "c_2", "c_8", "c_5", "c_8", "", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", ""});
    dibujaFila(39, {"", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", "c_8", "c_5", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_5", "c_8", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", ""});
    dibujaFila(40, {"", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", "c_8", "c_5", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_5", "c_8", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", ""});
    dibujaFila(41, {"", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", "c_8", "c_5", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_5", "c_8", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_2", "c_8", "", ""});
    dibujaFila(42, {"", "c_8", "c_2", "c_2", "c_2", "c_2", "c_8", "", "", "c_8", "c_5", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_5", "c_8", "", "", "c_8", "c_2", "c_2", "c_2", "c_2", "c_8", "", ""});
    dibujaFila(43, {"", "", "c_8", "c_2", "c_2", "c_2", "c_8", "", "", "c_8", "c_5", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_5", "c_8", "", "", "c_8", "c_2", "c_2", "c_2", "c_8", "", "", ""});
    dibujaFila(44, {"", "", "c_8", "c_2", "c_2", "c_2", "c_8", "", "", "c_8", "c_5", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_5", "c_8", "", "", "c_8", "c_2", "c_2", "c_2", "c_8", "", "", ""});
    dibujaFila(45, {"", "", "c_8", "c_2", "c_2", "c_2", "c_8", "", "", "", "c_8", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_8", "", "", "", "c_8", "c_2", "c_2", "c_2", "c_8", "", "", ""});
    dibujaFila(46, {"", "", "", "c_8", "c_2", "c_2", "c_8", "", "", "", "c_8", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_8", "", "", "", "c_8", "c_2", "c_2", "c_8", "", "", "", ""});
    dibujaFila(47, {"", "", "", "c_8", "c_2", "c_2", "c_8", "", "", "", "c_8", "c_5", "c_5", "c_8", "c_2", "c_8", "c_5", "c_5", "c_8", "", "", "", "c_8", "c_2", "c_2", "c_8", "", "", "", ""});
    dibujaFila(48, {"", "", "", "c_8", "c_8", "c_8", "c_8", "", "", "", "", "c_8", "c_5", "c_8", "c_8", "c_8", "c_5", "c_8", "", "", "", "", "c_8", "c_8", "c_8", "c_8", "", "", "", ""});
    dibujaFila(49, {"", "", "", "", "", "", "", "", "", "", "", "c_8", "c_5", "c_5", "c_5", "c_5", "c_5", "c_8", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(50, {"", "", "", "", "", "", "", "", "", "", "", "", "c_8", "c_5", "c_5", "c_5", "c_8", "", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(51, {"", "", "", "", "", "", "", "", "", "", "", "", "c_8", "c_5", "c_5", "c_5", "c_8", "", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(52, {"", "", "", "", "", "", "", "", "", "", "", "", "", "c_8", "c_5", "c_8", "", "", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(53, {"", "", "", "", "", "", "", "", "", "", "", "", "", "c_8", "c_5", "c_8", "", "", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(54, {"", "", "", "", "", "", "", "", "", "", "", "", "", "", "c_8", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""});
    dibujaFila(55, {"", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""});

}
